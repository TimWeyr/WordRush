Gesamtkonzept WordRush ‚Äì Technische Spezifikation (aktuelle Fassung)
Stand: Shooter-only + Lern und Testmodus + 2D-Side-Scroller mit Galaxy-Hub
________________________________________
1. Gesamtidee
1.1 Ziel der App
‚Ä¢	Interaktives Lernspiel f√ºr Sprache & Fachwissen (z. B. ICD-10, Psychologie, Sprachen, Mathe).
‚Ä¢	Kernmechanik:
o	Ship fliegt, sammelt correct-W√∂rter ein.
o	Distractors werden mit Laser abgeschossen oder verursachen Schaden.
‚Ä¢	Lernen passiert direkt im Shooter:
o	Lernmodus: correct vs. distractors farblich unterscheidbar, aber nur 10 % Punkte.
o	Nach erstem korrektem Umgang mit einem Item wird es nicht mehr farblich unterschieden ‚Üí voller Punktwert.
‚Ä¢	Fortschritt sichtbar √ºber Galaxy-Map-Hub (Planeten & Orbits) und Statistiken.
‚Ä¢	Spiel bleibt vollst√§ndig 2D, Tiefenwirkung nur visuell (Parallax).
1.2 Technikgrundlage
‚Ä¢	Web-first:
o	React + Vite
o	HTML5 Canvas (optional Pixi.js als Renderer)
‚Ä¢	LocalStorage als prim√§rer Speicher:
o	Fortschritt, Settings, Lernstatus (St√ºtzr√§der), Orientierung.
o	Sp√§ter austauschbar gegen Supabase (Adapter).
o	System so bauen das sich Nutzerdaten und Fortschritt leicht mit Supabase schreiben lassen. 
‚Ä¢	PWA-f√§hig, Basis f√ºr iOS/Android via Capacitor.
‚Ä¢	Datengetrieben:
o	Inhalte aus themes.json + words.json.
o	Engine liest nur JSON, keine Hardcodes in der Logik.
________________________________________
2. Architektur & Modularit√§t
2.1 Verzeichnisstruktur (Vorschlag)
	Dateien und Logik gut aufteilen, eher mehrere kleine Dateien die √ºbersichtlich sind 
‚Ä¢	/core
o	GameLoop, Renderer, SceneManager, Collision, AudioManager.
‚Ä¢	/logic
o	ShooterEngine, SmartieView (optional), Difficulty, Scoring.
‚Ä¢	/ui
o	Galaxy-Map-Hub, HUD, Settings-Panel, Dialoge.
‚Ä¢	/ui/grafics
o	Ship.png schiff grafik.
‚Ä¢	/audio
o	/music/ ‚Äì Theme-Musik (z. B. depression_theme.mp3)
o	/sfx/ ‚Äì Sound-Effekte (z. B. bubble_hit_soft.mp3, explosion_minor.mp3)
‚Ä¢	/content
o	themes/ ‚Äì Universe- und Theme-Struktur:
ÔÇß	universe.<id>.json ‚Äì Universe-Definitionen (z. B. universe.englisch.json, universe.psychiatrie.json).
ÔÇß	themes/<universe_id>/themes.<theme_id>.json ‚Äì Theme-Definitionen liegen direkt im Universe-Ordner.
ÔÇß	themes/<universe_id>/<theme_id>/ ‚Äì Theme-Ordner f√ºr Chapter-Dateien.
ÔÇß	themes/<universe_id>/<theme_id>/<chapter_id>.json ‚Äì Chapter-Definitionen (words.json).
ÔÇß	Engine l√§dt alle verf√ºgbaren universe.json f√ºr die Universe-Auswahl.
ÔÇß	Nach Universe-Auswahl l√§dt Engine alle themes.json aus dem gew√§hlten Universe-Ordner.
‚Ä¢	/infra
o	ProgressProvider (LocalStorage), zuk√ºnftiger SupabaseProvider.
‚Ä¢	/config
o	config.json ‚Äì Gameplay-Konstanten, Geschwindigkeiten, Collision-Werte
o	ui.json ‚Äì UI-Spezifische Einstellungen
o	keybindings.json ‚Äì Tastenbelegung (optional, f√ºr sp√§tere Erweiterung)
‚Ä¢	Audio-Dateien:
o	In JSON: Nur Dateinamen (z. B. "bubble_hit_soft.mp3")
o	Engine erg√§nzt automatisch Pfad: /audio/sfx/ oder /audio/music/
o	Format: .mp3 (beste Web-Unterst√ºtzung)
o	AudioManager: Preload per Chapter, automatisches Fallback auf Stille bei fehlendem File.
2.2 Entkopplung √ºber Provider
‚Ä¢	Engine spricht nur mit Interfaces:
o	ProgressProvider, SettingsProvider, AudioProvider.
‚Ä¢	Default: Local-Adapter:
o	LocalProgress, LocalSettings, LocalAudio.
‚Ä¢	Sp√§ter: SupabaseProgress, RemoteSettings etc. einklinkbar ohne √Ñnderung der Engine.
________________________________________
3. Kern-Spielmodus: Shooter
3.1 Grundobjekte
‚Ä¢	Base
o	Feste Position:
ÔÇß	Vertikale Orientierung: Base unten am Screen.
ÔÇß	Horizontale Orientierung: Base links am Screen (um 90¬∞ gedreht).
o	Repr√§sentiert das aktuelle Lernkonzept (base.word oder base.image).
o	Wird nicht gesteuert, sondern ist visuelle & semantische Referenz.
o	Darstellung:
ÔÇß	Text-Modus: Wird als Text dargestellt (base.word + base.visual), wenn base.image nicht vorhanden ist.
ÔÇß	Grafik-Modus: Wird als Bild dargestellt (base.image + base.visual), wenn base.image vorhanden ist.
o	Engine-Logik: Wenn base.image vorhanden ‚Üí Grafik verwenden, sonst base.word als Text.
o	Wird optisch dargestellt wie in base:visual konfiguriert (size, color, glow, pulsate gelten f√ºr beide Modi).
‚Ä¢	Ship
o	Eigenst√§ndiges Objekt, wird vom Spieler gesteuert.
o	Bewegt sich frei in 2D (x,y) innerhalb des Spielfeldes.
o	Hat Health-Balken (Standard: health = 10, aus config.json.startHealth).
o	Health ist persistent √ºber alle Items einer Session.
o	Bei R√ºckkehr zur Galaxy-Map: Health wird auf Startwert zur√ºckgesetzt.
o	Keine Health-Regeneration w√§hrend des Spiels.
‚Ä¢	Correct-Objekte
o	Semantisch passende Elemente zum base-Konzept.
ÔÇß	Quelle: words:correct:entry.word oder words:correct:entry.image
o	Darstellung:
	Text-Modus: entry.word wird als Text dargestellt (wenn entry.image nicht vorhanden).
	Grafik-Modus: entry.image wird als Grafik dargestellt (wenn vorhanden).
	Engine-Logik: Wenn entry.image vorhanden ‚Üí Grafik, sonst entry.word.
	entry.visual gilt f√ºr beide Modi (color als Overlay/Tint bei Grafiken).
o	Sollen vom Ship eingesammelt werden (Ship-Kollision).
o	Wenn sie nicht eingesammelt werden fliegen sie auf base zu.
‚Ä¢	Distractor-Objekte
o	Irref√ºhrende/√§hnliche Begriffe.
ÔÇß	Quelle: words:distractors:entry.word oder words:distractors:entry.image
o	Darstellung: Gleiche Logik wie bei Correct (Text oder Grafik).
o	Sollen mit dem Laser abgeschossen werden, d√ºrfen nicht eingesammelt werden. Sonst schaden distractors:damage auf ship.health
3.2 Rundenstruktur
‚Ä¢	Eine Runde = alle correct + distractors eines words.json-Eintrags (Base-Item).
‚Ä¢	Ablauf:
0.	Lade Base + zugeh√∂rige correct/distractors.
1. zeige f√ºr 1 sekunde introText an wenn das merkmal exisitert und nicht leer ist.
2.	Spawne Wellen entsprechend spawnPosition, speed, pattern, spawnSpread.
3.	Spieler steuert Ship, sammelt correct ein, schie√üt distractors ab.
4.	Runde endet, wenn:
ÔÇß	alle Objekte verarbeitet sind (gesammelt oder zerst√∂rt), oder
ÔÇß	Ship-Health 0 erreicht.
5.	Danach:
ÔÇß	Bei Health > 0 ‚Üí Runde ausgewertet, Fortschritt gespeichert.
ÔÇß	√úbergang zur n√§chsten Runde:
	Base-Wechsel-Animation (Fade-out alte Base, Fade-in neue Base, 1-1.5s).
	W√§hrend √úbergang: Kurze Score-Anzeige der letzten Runde.
	Ship bleibt sichtbar,  steuerbar w√§hrend √úbergang.
	Neue Runde startet nach √úbergang automatisch. 
ÔÇß	Bei Health = 0 ‚Üí Game Over:
	Sofortige Bewegungs-Freeze des Ships.
	1.5s Explosion-Animation mit Screen-Shake.
	Fade-out zur Galaxy-Map.
	Progress wird trotzdem gespeichert (bereits gesammelte Items bleiben erhalten).
________________________________________
4. Steuerung
4.1 PC-Steuerung
‚Ä¢	Bewegung
o	Mausposition steuert die Ship-Position mit Smooth-Follow:
	shipPos += (mousePos - shipPos) * smoothFactor * deltaTime
	smoothFactor = 0.15 (aus config.json)
	Max-Geschwindigkeit: 300 px/s (config.json.shipSpeed)
o	Ship kann nicht aus Spielfeld-Grenzen (Padding: 20px zum Rand).
‚Ä¢	Schie√üen
o	Linke Maustaste ‚Üí Laser-Schuss.
ÔÇß	Startpunkt = Ship-Position.
ÔÇß	Richtung = zum Mauszeiger.
	Laser-Geschwindigkeit: 1200 px/s (config.json.laserSpeed)
	Reichweite: Bis Bildschirmrand, dann despawn
	Durchschlagskraft: Trifft nur ERSTES Objekt, dann despawn
	Cooldown: 0.2s zwischen Sch√ºssen (config.json.laserCooldown)
ÔÇß	Treffer:
ÔÇß	Distractor ‚Üí korrekt: Explosion, Punkte +, evtl. redirect-Anzeige.
ÔÇß	Correct ‚Üí Fehler: Correct explodiert, Punkte ‚àí, Lernstatus angepasst.
‚Ä¢	Weitere Tasten
o	ESC ‚Üí zur√ºck zum Galaxy-Hub.
‚Ä¢	Pause-Mechanik
o	Wenn Mauszeiger das Fenster verl√§sst ‚Üí Spiel pausiert automatisch.
o	Resume mit Play-Taste (Overlay mit "Play"-Button erscheint).
o	Pausiert auch bei: Tab-Wechsel, Fenster verliert Fokus.
4.2 Touch-Steuerung (Tablet, Smartphone)
‚Ä¢	Bewegung
o	Ein Finger auf dem Screen:
ÔÇß	Ship bewegt sich mit maxSpeed (300 px/s) in Richtung Touch-Position.
	Stoppt bei Erreichen (Threshold: 5px).
o	Ship kann nicht aus Spielfeld-Grenzen (Padding: 20px zum Rand).
‚Ä¢	Schie√üen
o	Zweiter Finger ‚Üí Laser-Schuss von aktueller Ship-Position in Richtung Finger.
	Gleiche Laser-Eigenschaften wie PC (Geschwindigkeit, Cooldown, Durchschlag).
o	Alternativ zus√§tzlich:
ÔÇß	Fire-Button links unten im Screen:
ÔÇß	Tap l√∂st Laser-Schuss in Richtung zuletzt genutzter Bewegungsrichtung / Zielreticle aus.
‚Ä¢	Kollisionen:
o	Ship + correct ‚Üí Einsammeln (correct.points)
o	Ship + distractor ‚Üí Schaden (distractors.damage)
o	Base + correct ÔÉ† Punkte addieren (correct.points)
o	Base + distractor ÔÉ† Punkte abziehen (distractors.points)
4.3 Kollisionserkennung
‚Ä¢	Prim√§r: Circle-Collision (Performance, smooth)
‚Ä¢	Radius-Berechnung:
o	Text-Objekte: 50% der Textbreite + fontSize-Faktor
o	Grafik-Objekte: 50% der kleineren Dimension (width/height) * size-Faktor
o	Ship: Fester Radius von 30px (kleinere Hitbox als Grafik ‚Üí fairer)
‚Ä¢	Toleranz: 10% √úberlappung n√∂tig f√ºr Kollision (verhindert "Touch-Unf√§lle")
‚Ä¢	Optional in visual: collisionRadius √ºberschreibt Auto-Berechnung
‚Ä¢	Definiert in config.json: shipRadius, defaultObjectRadius, overlapTolerance
________________________________________
5. Orientierung & Landschaft
5.1 Orientierung (vertical/horizontal)
‚Ä¢	Steuerung √ºber config.json.orientationConfig:
{
  "orientationConfig": {
    "vertical": {
      "spawnFrom": "top",
      "basePosition": "bottom_center",
      "shipBounds": "screen"
    },
    "horizontal": {
      "spawnFrom": "right",
      "basePosition": "center_left",
      "shipBounds": "screen"
    }
  }
}
‚Ä¢	Umschaltung:
o	Automatisch (abh√§ngig von Aspect Ratio) oder
o	Manuell √ºber Settings (Dropdown: ‚ÄûVertikal / Horizontal‚Äú).
5.2 Landschaft (Parallax, Mittelkomplexit√§t)
‚Ä¢	3‚Äì4 Parallax-Layer:
o	Layer 1 (nah): gr√∂√üere Partikel/Strukturen, langsam scrollend.
o	Layer 2 (mittel): neuronale Linien / synaptische Muster.
o	Layer 3 (fern): Sternenfeld / diffuse Formen.
o	Layer 4: Theme-spezifischer Farbverlauf (backgroundGradient).
‚Ä¢	Scrollrichtung:
o	Vertikal: von oben nach unten.
o	Horizontal: von rechts nach links.
‚Ä¢	Optionaler Partikel-Layer pro chapter √ºber particleEffect.
________________________________________
6. Spawn- & Bewegungslogik
6.1 Spawn-Logik & Timing
‚Ä¢	Wellen-basiertes Spawning:
o	Jedes Item (z. B. F32_001) definiert alle correct + distractors.
o	waveDuration in words.json pro Item (z. B. 8, 12, 15 Sekunden).
	Anpassbar je nach Anzahl und Schwierigkeit der Objekte.
	Fallback auf config.json.waveDuration (8s), wenn nicht definiert.
o	spawnRate in chapters (z. B. 1.5) = Objekte pro Sekunde f√ºr dieses Chapter.
o	Pro Objekt: Optionales spawnDelay (in Sekunden ab Rundenstart, z. B. 0, 2, 5, 8).
o	Wenn kein spawnDelay angegeben: Gleichm√§√üige Verteilung √ºber waveDuration.
‚Ä¢	Maximale Objekte auf Screen:
o	Max. 8-10 Objekte gleichzeitig (verhindert Chaos).
o	Definiert in config.json.maxConcurrentObjects.
‚Ä¢	Runden-Ende:
o	Runde endet, sobald alle Objekte verarbeitet sind (gesammelt/zerst√∂rt).
o	Spieler kann schneller fertig sein als waveDuration ‚Üí n√§chste Runde startet sofort.
o	Keine erzwungene Wartezeit bis waveDuration abgelaufen ist.
6.2 Spawn-Position
‚Ä¢	spawnPosition ‚àà [0.0, 1.0]:
o	Vertikal: relative X-Position (Breite).
o	Horizontal: relative Y-Position (H√∂he).
‚Ä¢	Spawn-Spread:
o	Kleine Variation um die Position, z. B. ¬± spawnSpread = 0.05.
‚Ä¢	Beispiel:
"spawnPosition": 0.5,
"spawnSpread": 0.05,
"spawnDelay": 2.5,
"pattern": "linear_inward"
6.3 Bewegungsmuster
‚Ä¢	Definiert durch pattern:
M√∂gliche Werte:
‚Ä¢	linear_inward ‚Äì gerade auf Base/Ship zu.
‚Ä¢	zigzag ‚Äì horizontale/vertikale Auslenkungen.
‚Ä¢	wave ‚Äì sinusf√∂rmige Bewegung.
‚Ä¢	seek_center ‚Äì leicht homing-artiges Verhalten.
Geschwindigkeit: speed (0.0‚Äì2.0) als Faktor auf Basis-Geschwindigkeit aus config.json.
‚Ä¢	Berechnung: finalSpeed = config.baseSpeed * itemSpeed * currentSpeedMultiplier.
o	baseSpeed aus config.json (z. B. 100 px/s)
o	itemSpeed aus words.json (z. B. 0.9)
o	currentSpeedMultiplier aus learningState.difficultyScaling (z. B. 1.157625)
‚Ä¢	Gilt f√ºr ALLE correct und distractors des aktuellen Items.
‚Ä¢	Wave-Pattern: Amplitude/Frequenz werden auch von currentSpeedMultiplier skaliert.
‚Ä¢	NICHT beeinflusst: Laser-Speed, Ship-Speed.
________________________________________
7. Punkte- & Levelsystem
7.1 Grundprinzip
‚Ä¢	Alle Punkte in words.json sind positiv.
‚Ä¢	Engine entscheidet √ºber Addition oder Subtraktion, abh√§ngig von:
o	Objekt-Typ (correct vs. distractor),
o	Player-Aktion (Einsammeln vs. Abschuss),
o	Lernmodus (10 %-Cap).
7.2 Punktelogik im Shooter
‚Ä¢	Correct
o	Ship sammelt correct ein:
ÔÇß	Normalmodus:
ÔÇß	Punkte: +points.
ÔÇß	Kontext wird eingeblendet.
ÔÇß	Reaktionsbonus (siehe unten).
ÔÇß	Lernmodus:
ÔÇß	Punkte: +points * 0.1.
o	Laser trifft correct:
ÔÇß	Punkte: -points.
ÔÇß	Correct explodiert.
ÔÇß	Kontext trotzdem angezeigt (Fehler-Erkl√§rung).
o	Correct trifft Base:
ÔÇß	Punkte: +points
‚Ä¢	Distractor
o	Laser trifft distractor:
ÔÇß	Punkte: +points.
ÔÇß	Word wird ausgeblendet an der Stelle wird redirect eingeblendet.
ÔÇß	Einschlags-Explosion. Ersch√ºtterung
ÔÇß	Fliegt aus dem Bild und verblasst
o	Ship kollidiert mit distractor:
ÔÇß	Ship nimmt Schaden: health -= damage.
ÔÇß	Punkte: -points.
ÔÇß	Verletztes Kurzes Blinken des ship
ÔÇß	redirect-Text als Hinweis.
ÔÇß	Distractor fliegt weiter auf seinem kurs
o	Distractor trifft base
ÔÇß	Punkte: -points.
ÔÇß	Verletztes Kurzes Blinken der base
ÔÇß	redirect-Text als Hinweis.

‚Ä¢	Leerschuss (optional)
o	Wenn konfiguriert:
ÔÇß	config.json.pointsPerMiss ‚Üí kleine Punktabz√ºge pro Schuss ohne Treffer.
7.3 Reaktionszeit-Bonus
‚Ä¢	Berechnung:
o	reactionTime = now - spawnTime.
o	bonusFactor = max(0, 1 - reactionTime / tMax) (z. B. tMax = 5 s).
o	finalPoints = basePoints * (1 + bonusFactor * 0.5).
‚Ä¢	Gilt nur beim korrekten Einsammeln eines correct.
‚Ä¢	HUD zeigt kurz: ‚Äû‚ö° Quick Bonus +X %‚Äú.
7.4 Reihenfolge-Bonus (collectionOrder)
‚Ä¢	Optional pro correct: collectionOrder: n.
o	Wenn da ein Wert collectionOrder steht: HUD-Text: ‚ÄûReihenfolge"
‚Ä¢	Tracking: Nur innerhalb einer Runde (Reset bei neuem Item)
‚Ä¢	Anzeige:
o	Im Lernmodus: Nummern vor correct.word (z. B. "1. Freudlosigkeit")
o	Im Normalmodus: Keine Nummern, aber Reihenfolge-HUD zeigt Fortschritt (1/3, 2/3...)
‚Ä¢	Wenn alle correct eines Base-Items in der korrekten Reihenfolge eingesammelt werden:
o	Bonus-Berechnung: Alle Item-Punkte (correct-Summe) √ó 2 am Rundenende
o	HUD-Text: ‚ÄûReihenfolge! x2 Score"
‚Ä¢	Falsche Reihenfolge:
o	Bonus wird SOFORT unwiderruflich f√ºr diese Runde verworfen
o	HUD zeigt: ‚Äû‚ùå Reihenfolge verloren"
o	Normale Punkte werden trotzdem vergeben
________________________________________
8. Lernmodus & Lernstatus
8.1 Idee
‚Ä¢	Lernmodus = color-coded Mode:
o	Correct und distractors sind farblich eindeutig unterscheidbar.
o	Spieler kann sehr leicht testen/lernen.
o	Daf√ºr nur 10 % der Punkte.
‚Ä¢	Sobald ein Item einmal richtig benutzt wurde, verschwindet die Farbunterst√ºtzung beim n√§chsten Laden.
‚Ä¢	Wenn da ein Wert collectionOrder  steht 
o	steht vor correct:word die collectionOrder
ÔÇß	Also bsp: ‚Äû1. Freudlosigkeit‚Äú

8.2 ‚ÄûEinmal richtig gemacht‚Äú ‚Äì Kriterium
Pro words.id:
‚Ä¢	Korrektes Verhalten =
o	Correct wird mindestens einmal eingesammelt (nicht abgeschossen) oder landet in der base und
o	Distractor wird mindestens einmal abgeschossen (nicht eingesammelt),
o	innerhalb derselben Runde oder √ºber mehrere Runden kumulativ.
‚Ä¢	Sobald diese Bedingung erf√ºllt ist:
o	trained: true und colorCoded: false.
o	Beim n√§chsten Spawn dieses Items:
ÔÇß	Keine farbliche Unterscheidung mehr.
ÔÇß	Volle Punkte aktiv.
ÔÇß	Keine collectionOrder nummerierung mehr vor correct
8.3 Datenstruktur learningState
{
  "wordrush_learningState": {
    "F32_001": {
      "attempts": 3,
      "correctCollects": 2,
      "correctLaserHits": 0,
      "distractorKills": 2,
      "distractorCollisions": 1,
      "trained": true,
      "colorCoded": false,
      "difficultyScaling": {
        "currentSpeedMultiplier": 1.157625,
        "replays": 3,
        "colorContrast": 0.7
      }
    },
    "F20_002": {
      "attempts": 1,
      "correctCollects": 0,
      "correctLaserHits": 1,
      "distractorKills": 0,
      "distractorCollisions": 0,
      "trained": false,
      "colorCoded": true,
      "difficultyScaling": {
        "currentSpeedMultiplier": 1.0,
        "replays": 1,
        "colorContrast": 1.0
      }
    }
  }
}
‚Ä¢	Engine-Logik:
o	colorCoded = !trained (au√üer globaler Lernmodus-Override in Settings).
o	Punkteskalierung:
ÔÇß	Wenn colorCoded === true ‚Üí finalPoints *= 0.1.
o	Adaptive Schwierigkeit:
ÔÇß	Bei jedem Replay: currentSpeedMultiplier *= meta.difficultyScaling.speedMultiplierPerReplay.
ÔÇß	Wenn trained === true und colorContrastFade === true: colorContrast wird reduziert (z. B. 1.0 ‚Üí 0.7).
________________________________________
9. Adaptive Schwierigkeit (nur Shooter)
9.1 Meta-Konfiguration in words.json
"meta": {
  "difficultyScaling": {
    "speedMultiplierPerReplay": 1.05,
    "colorContrastFade": true,
    "angleVariance": 0.3
  }
}
‚Ä¢	Statische Konfiguration (words.json):
o	Definiert, WIE die Anpassung erfolgt (Multiplikator, Fade-Verhalten, etc.).
‚Ä¢	Dynamische Werte (learningState):
o	Speichern die aktuellen Schwierigkeitswerte pro Item (siehe 8.3).
o	Werden bei jedem Replay aktualisiert.
‚Ä¢	Gilt nur im Shooter:
o	Mehrere Replays / hohe Erfolgsquote:
ÔÇß	speed wird pro Replay mit speedMultiplierPerReplay multipliziert (gespeichert in learningState.difficultyScaling.currentSpeedMultiplier).
ÔÇß	Farben k√∂nnen subtil angeglichen werden (Kontrast reduziert), wenn nicht mehr colorCoded (gespeichert in learningState.difficultyScaling.colorContrast).
o	Viele Fehler:
ÔÇß	Optionale Absenkung:
ÔÇß	Speed etwas senken (currentSpeedMultiplier reduzieren).
ÔÇß	SpawnRate reduzieren.
ÔÇß	Lernmodus global aktivierbar √ºber Settings.
________________________________________
10. UI & Progress
10.1 Galaxy-Map-Hub (Star-Fox-inspiriert)
‚Ä¢	Universe-Auswahl:
o	Universe-Auswahl erfolgt √ºber Galaxy-Hub, nicht im HUD w√§hrend des Spiels.
o	Im Hub: Dropdown oder horizontale Scroll-Leiste mit Universes (z. B. ‚ÄûEnglisch", ‚ÄûPsychiatrie").
o	Universe definiert eigene Farben, Musik, Hintergr√ºnde (aus universe.json).
o	Nach Universe-Auswahl werden nur Themes dieses Universes angezeigt.
‚Ä¢	Hierarchie:
o	Universes = Galaxien/Cluster in der 2D-Galaxie.
o	Themes = Planeten/Stellen in einer 2D-Galaxie.
o	Chapters = Monde oder Orbit-Segmente um den Planeten. gelcihm√§√üig und dynamisch verteilt.
o	Levels/Items = Marker auf Orbits.
Funktionen:
‚Ä¢	Tap/Klick auf Planeten ‚Üí Zoom in das Theme.
‚Ä¢	Tap/Klick auf Orbit-Segment (Chapter) ‚Üí Auswahl dieses Chapters:
o	Single-Chapter-Mode: Nur Items aus diesem Chapter.
o	Mix-Mode (optional zuschaltbar): Items aus ALLEN Chapters des aktuellen Themes werden gemischt. wenn man auf den planeten klickt
	
  ‚Ä¢	Fortschritt:
o	Farbe/Leuchten des Planeten = themeProgress
o	Orbit-Dichte = Anzahl gelernter Items.


10.2 HUD (In-Game)
‚Ä¢	Oben links:
o	Ship-Health-Bar (0‚Äì10).
‚Ä¢	Oben rechts:
o	Score (gesamt + Sitzungs-Score).
‚Ä¢	Mitte oben:
o	Theme-Name + Chapter-Name + Level/Item-ID.
‚Ä¢	Unterer Bereich (oder schmaler Streifen):
o	Kontext-Text bei Interaktionen:
ÔÇß	‚ÄûDepression zeigt sich durch Freudlosigkeit.‚Äú
ÔÇß	‚ÄûWahn geh√∂rt zu Schizophrenie.‚Äú
‚Ä¢	Buttons:

o	Settings-Icon (Zahnrad).
o	Zur√ºck-zum-Hub (ESC / Touch-Button).

10.3 Settings
‚Ä¢	Gespeichert z. B. in wf_ui_settings:
{
  "wf_ui_settings": {
    "orientation": "vertical",
    "colorScheme": "dark",
    "audio": { "music": false, "effects": true },
    "mixModeGlobal": false,
    "st√ºtzr√§derGlobal": true
  }
}
‚Ä¢	Optionen:
o	Orientation: Vertikal / Horizontal.
o	Audio: Musik an/aus, Effekte an/aus.
o	St√ºtzr√§der global an/aus (override des Item-Status).
o	Mix-Mode global an/aus.
o	Theme-Sprachauswahl (z. B. DE/EN).
________________________________________
11. Datenspeicherung & Progress
11.1 Progress-Struktur
{
  "wordrush_progress": {
    "themes": {
      "icd10": {
        "chapters": {
          "F32_Depression": {
            "levelsPlayed": 4,
            "levelsTotal": 10,
            "score": 2850,
            "perfectRuns": 2,
            "failedRuns": 1,
            "unlocked": true,
            "mixMode": false,
            "lastPlayed": "2025-11-09T10:32:00Z",
            "collectedCorrectIds": ["F32_001", "F32_002"],
            "failedIds": ["F32_003"]
          }
        },
        "themeProgress": 0.36,
        "totalScore": 3450
      }
    },
    "meta": {
      "lastTheme": "icd10",
      "lastChapter": "F32_Depression",
      "mixModeGlobal": false,
      "created": "2025-11-08T09:00:00Z",
      "updated": "2025-11-09T10:32:00Z",
      "version": "1.2"
    }
  }
}
‚Ä¢	failedIds k√∂nnen genutzt werden, um Items h√§ufiger einzumischen.
‚Ä¢	collectedCorrectIds = schon mit korrektem Verhalten erreichte Items.
11.3 Unlocking & Freischaltung
‚Ä¢	Chapters:
o	Alle Chapters eines Themes sind sofort verf√ºgbar (unlocked: true).
o	Kein progressionsbasiertes Unlock-System f√ºr Chapters.
o	Spieler kann frei w√§hlen, welches Chapter gespielt wird.
‚Ä¢	Items innerhalb Chapter:
o	Alle Items eines Chapters sind sofort verf√ºgbar.
o	Kein Item-Level-Lock innerhalb eines Chapters.
‚Ä¢	Themes:
o	In themes.json: available: true/false (manuell gesteuert, f√ºr DLC/Updates).
o	Themes mit available: false werden in Galaxy-Map ausgegraut angezeigt.
o	Erm√∂glicht Content-Erweiterungen ohne Code-√Ñnderung.
11.4 St√ºtzr√§der + Settings
‚Ä¢	Siehe wordrush_learningState und wf_ui_settings oben.
‚Ä¢	Alle drei Bereiche zusammen:
o	wordrush_progress
o	wordrush_learningState
o	wf_ui_settings
k√∂nnen sp√§ter f√ºr Export/Import genutzt werden (Backup).
________________________________________
12. Config.json ‚Äì Vollst√§ndige Spezifikation
{
  "gameplay": {
    "baseSpeed": 3100,
    "shipSpeed": 3020,
    "shipSmoothFactor": 0.15,
    "laserSpeed": 1200,
    "laserCooldown": 0.2,
    "startHealth": 10,
    "maxConcurrentObjects": 10,
    "pointsPerMiss": -5,
    "waveDuration": 8
  },
  "collision": {
    "shipRadius": 30,
    "defaultObjectRadius": 40,
    "overlapTolerance": 0.1
  },
  "orientationConfig": {
    "vertical": {
      "spawnFrom": "top",
      "basePosition": "bottom_center",
      "shipBounds": "screen"
    },
    "horizontal": {
      "spawnFrom": "right",
      "basePosition": "center_left",
      "shipBounds": "screen"
    }
  },
  "version": "1.0"
}
‚Ä¢	Erkl√§rung:
o	gameplay.baseSpeed: Basis-Geschwindigkeit f√ºr Objekte in px/s
o	gameplay.shipSpeed: Maximale Ship-Geschwindigkeit in px/s
o	gameplay.shipSmoothFactor: Smooth-Follow-Faktor f√ºr Maus (0.0-1.0)
o	gameplay.laserSpeed: Laser-Geschwindigkeit in px/s
o	gameplay.laserCooldown: Cooldown zwischen Sch√ºssen in Sekunden
o	gameplay.startHealth: Start-Health des Ships
o	gameplay.maxConcurrentObjects: Max. gleichzeitig aktive Objekte
o	gameplay.pointsPerMiss: Punktabzug pro Leerschuss (optional, -5 oder 0)
o	gameplay.waveDuration: Standard-Dauer einer Welle in Sekunden
o	collision.shipRadius: Kollisions-Radius des Ships in px
o	collision.defaultObjectRadius: Standard-Radius f√ºr Objekte in px
o	collision.overlapTolerance: √úberlappungs-Toleranz (0.0-1.0, z.B. 0.1 = 10%)
o	orientationConfig: Siehe Abschnitt 5.1
________________________________________
13. JSON-Beispiele
13.1 universe.json (Beispiel: Englisch)
{
  "id": "englisch",
  "name": "Englisch",
  "description": "Lerne Englisch durch interaktives Gameplay - Vokabeln, Grammatik und Alltagssprache.",
  "colorPrimary": "#4a90e2",
  "colorAccent": "#7bb3f0",
  "backgroundGradient": ["#1a3a5f", "#2d5a8a"],
  "icon": "üá¨üáß",
  "available": true,
  "language": "de",
  "music": {
    "theme": "english_universe_theme.mp3",
    "volume": 0.6
  },
  "particleEffect": "language_particles",
  "shipSkin": "english_ship",
  "laserColor": "#4a90e2",
  "themes": [
    "english_cap"
  ],
  "meta": {
    "author": "Tim Weyrauch",
    "version": "1.0",
    "created": "2025-11-16"
  }
}
‚Ä¢	Erkl√§rung:
o	id: Eindeutige Universe-ID (wird f√ºr Verzeichnisstruktur verwendet).
o	name: Anzeigename im UI.
o	description: Beschreibung des Universes.
o	colorPrimary/colorAccent: Prim√§re Farben f√ºr UI-Elemente dieses Universes.
o	backgroundGradient: Hintergrundverlauf f√ºr Galaxy-Hub.
o	icon: Emoji oder Icon f√ºr Universe-Auswahl.
o	music: Universe-spezifische Hintergrundmusik.
o	particleEffect: Partikel-Effekt f√ºr dieses Universe.
o	shipSkin: Optional: Ship-Skin f√ºr dieses Universe.
o	laserColor: Farbe der Laser-Sch√ºsse in diesem Universe.
o	themes: Array von Theme-IDs, die zu diesem Universe geh√∂ren.
‚Ä¢	Vererbungslogik f√ºr Universe-Eigenschaften:
o	particleEffect, shipSkin, laserColor werden auf Universe-Ebene definiert.
o	K√∂nnen durch Theme-Eigenschaften √ºberschrieben werden (in themes.json).
o	K√∂nnen durch Chapter-Eigenschaften √ºberschrieben werden (in chapter.json).
o	Priorit√§t: Chapter > Theme > Universe (h√∂chste Priorit√§t zuerst).
o	Beispiel: Universe definiert "language_particles", Theme √ºberschreibt mit "business_particles", Chapter √ºberschreibt mit "office_particles" ‚Üí Chapter-Wert wird verwendet.
13.2 themes.json (Beispiel: ICD-10)
{
  "id": "icd10",
  "name": "ICD-10 Psychopathologie",
  "description": "Lerne die wichtigsten St√∂rungsbilder aus dem Kapitel F des ICD-10.",
  "colorPrimary": "#6b4bff",
  "colorAccent": "#a58dff",
  "backgroundGradient": ["#110c33", "#221a66"],
  "maxLevels": 10,
  "icon": "üß†",
  "relatedPackages": ["psychology_basics", "focusing_intro"],
  "available": true,
  "language": "de",
  "chapters": {
    "F32_Depression": {
      "backgroundImage": "depression_bg.png",
      "backgroundGradient": ["#2d1b3d", "#4a2c5a"],
      "spawnRate": 1.5,
      "waveDuration": 3,
      "music": "depression_theme.ogg",
      "particleEffect": "melancholy_dust"
    },
    "Manie": {
      "backgroundImage": "mania_bg.png",
      "backgroundGradient": ["#ffd700", "#ff8c00"],
      "spawnRate": 2.5,
      "music": "mania_theme.ogg",
      "particleEffect": "energy_sparks"
    },
    "Demenz": {
      "backgroundImage": "dementia_bg.png",
      "backgroundGradient": ["#4a4a4a", "#6a6a6a"],
      "spawnRate": 1.0,
      "music": "dementia_theme.ogg",
      "particleEffect": "fading_mist"
    },
    "Schizophrenie": {
      "backgroundImage": "schizophrenia_bg.png",
      "backgroundGradient": ["#8b0000", "#4b0000"],
      "spawnRate": 2.0,
      "music": "schizophrenia_theme.ogg",
      "particleEffect": "chaos_fragments"
    },
    "Andere": {
      "backgroundImage": "other_bg.png",
      "backgroundGradient": ["#110c33", "#221a66"],
      "spawnRate": 1.8,
      "music": "other_theme.ogg",
      "particleEffect": "neutral_particles"
    }
  },
  "meta": {
    "author": "Tim Weyrauch",
    "version": "1.0",
    "created": "2025-11-07"
  },
  // Optional: √úberschreibung von Universe-Eigenschaften
  "particleEffect": "psychiatry_theme_particles",
  "shipSkin": "psychiatry_theme_ship",
  "laserColor": "#8b4bff"
}
‚Ä¢	Erkl√§rung f√ºr themes.json:
o	Themes k√∂nnen Universe-Eigenschaften √ºberschreiben:
ÔÇß	particleEffect: √úberschreibt Universe particleEffect f√ºr alle Chapters dieses Themes (au√üer Chapter hat eigenen Wert).
ÔÇß	shipSkin: √úberschreibt Universe shipSkin f√ºr alle Chapters dieses Themes (au√üer Chapter hat eigenen Wert).
ÔÇß	laserColor: √úberschreibt Universe laserColor f√ºr alle Chapters dieses Themes (au√üer Chapter hat eigenen Wert).
o	Chapters k√∂nnen diese Werte erneut √ºberschreiben:
ÔÇß	In der Chapter-Definition innerhalb des chapters-Objekts k√∂nnen particleEffect, shipSkin, laserColor gesetzt werden.
ÔÇß	Beispiel: Chapter "F32_Depression" mit "particleEffect": "melancholy_dust" √ºberschreibt Theme- und Universe-Werte.
ÔÇß	Priorit√§t: Chapter > Theme > Universe.
13.3 words.json (Beispiel: F32_001)
{
  "id": "F32_001",
  "theme": "icd10",
  "chapter": "F32_Depression",
  "level": 2,
  "waveDuration": 3,
  "base": {
    "word": "Depression",
    "type": "CoreConcept",
    "image": "depression_icon.png",
    "visual": {
      "tier": 2,
      "size": 1.0,
      "appearance": "bold",
      "color": "#c05060",
      "glow": true,
      "pulsate": true
    }
  },
  // Hinweis: base.image und base.word sind optional.
  // Wenn base.image vorhanden ist, wird die Grafik verwendet (Pfad relativ zu /ui/grafics oder /content).
  // Wenn base.image fehlt, wird base.word als Text dargestellt.
  // base.visual-Eigenschaften (size, color, glow, pulsate) gelten f√ºr beide Modi.
  // waveDuration: Optional pro Item (in Sekunden). Fallback auf config.json.waveDuration (8s).
  // Anpassbar je nach Anzahl und Schwierigkeit der Objekte eines Items.

  "correct": [
    {
      "entry": {
        "word": "Freudlosigkeit",
        "type": "Symptom"
      },
      "spawnPosition": 0.5,
      "spawnSpread": 0.05,
      "speed": 0.9,
      "points": 200,
      "pattern": "linear_inward",
      "hp": 1,
      "collectionOrder": 1,
      "reward": {
        "type": "focus_boost",
        "effect": "+10% score",
        "duration": 5
      },
      "context": "Depression zeigt sich durch Freudlosigkeit.",
      "visual": {
        "color": "#7fe8a2",
        "variant": "bubble",
        "pulsate": true,
        "fontSize": 1.1
      },
      "sound": "bubble_hit_soft"
    }
  ],

  "distractors": [
    {
      "entry": {
        "word": "Wahn",
        "type": "Symptom"
      },
      "spawnPosition": 0.3,
      "spawnSpread": 0.05,
      "speed": 1.2,
      "points": 150,
      "hp": 2,
      "damage": 1,
      "behavior": "seek_center",
      "dropChance": 0.2,
      "redirect": "Schizophrenie",
      "context": "Wahn geh√∂rt zu Schizophrenie.",
      "visual": {
        "color": "#ff6666",
        "variant": "spike",
        "pulsate": false,
        "shake": true,
        "fontSize": 1.0
      },
      "sound": "explosion_minor"
    }
  ],

  "meta": {
    "source": "ICD-10 F3",
    "tags": ["affektive_st√∂rungen"],
    "related": ["F32_002", "F30_001"],
    "difficultyScaling": {
      "speedMultiplierPerReplay": 1.05,
      "colorContrastFade": true,
      "angleVariance": 0.3
    }
  }
}
